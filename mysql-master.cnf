[mysqld]

server-id = 1
# 启用二进制日志
log_bin = mysql-bin
# 设置binlog格式 STATEMENT(同步SQL脚本) / ROW(同步行数据) / MIXED(混合同步)
binlog_format = ROW

# 如果主服务器有多个网络接口，指定一个可访问的接口地址
# bind-address = 192.168.0.10

# 全局事务
gtid_mode = ON
# 强制GTID的一致性
enforce_gtid_consistency = ON
# 将master.info元数据保存在系统表中
master_info_repository = TABLE
# 将relay.info元数据保存在系统表中
relay_log_info_repository = TABLE
# 禁用二进制日志事件校验
binlog_checksum = NONE

# 记录事务的算法，官网建议使用 XXHASH64
transaction_write_set_extraction = XXHASH64
# 启动时加载group_replication插件
plugin_load_add='group_replication.so'
# GROUP的名字，是UUID值，可以使用select uuid()生成
loose-group_replication_group_name = '558edd3c-02ec-11ea-9bb3-080027e39bd2'
# 是否随服务器启动而自动启动组复制，不建议直接启动，怕故障恢复时有扰乱数据准确性的特殊情况
loose-group_replication_start_on_boot = OFF
# 本地MGR的IP地址和端口，host:port，是MGR的端口,不是数据库的端口
loose-group_replication_local_address = '172.19.0.2:33061'
# 需要接受本MGR实例控制的服务器IP地址和端口，是MGR的端口，不是数据库的端口
loose-group_replication_group_seeds = '172.19.0.2:33061,172.19.0.3:33061,172.19.0.4:33061'
# 开启引导模式，添加组成员，用于第一次搭建MGR或重建MGR的时候使用，只需要在集群内的其中一台开启
loose-group_replication_bootstrap_group = OFF
# 白名单 172.19.0.0/16
loose-group_replication_ip_whitelist = '172.19.0.2,172.19.0.3,172.19.0.4'
# 本机ip
report-host = 172.19.0.2
# 本机port
report-port = 3306
