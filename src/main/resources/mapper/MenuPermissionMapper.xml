<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.canary.sys.mapper.MenuPermissionMapper">


    <select id="selectMenusByPermissionIds" resultType="com.example.canary.sys.entity.MenuPO">
        SELECT DISTINCT
            m.id,
            m.parent_id,
            m.name,
            m.icon,
            m.level,
            m.route,
            m.is_disabled as disabled
        FROM
            sys_menu m
                INNER JOIN sys_menu_permission mp ON m.id = mp.menu_id
                AND mp.is_deleted = '0'
        WHERE
            m.is_deleted = '0'
          AND m.is_disabled = 0
          AND mp.permission_id IN
        <foreach collection="permissionIds" item="permissionId" open="(" separator="," close=")" >
            #{permissionId}
        </foreach>
    </select>

</mapper>

